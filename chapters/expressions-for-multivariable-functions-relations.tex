% want to definitely cover the shapes stuff
% want to start off on a low level - how we might approach sticking, top to bottom, two functions together
% original post
% we should cover, squares, diamonds, triangles, batman equation, as examples or highlights.
\section{Expressions for Relations; Multivariable Functions}
We've previously covered the idea of `gluing' several functions together along a real number line, or through some condition, in one dimension. We can bring this idea to higher dimensions; functions in several variables with gluing along arbitrary planes, lines or other functions. There are infinitely many ways to do this, and with the tools set out in these notes, the problems become less of `how do I express this function in terms of elementary functions?' and more of a modelling problem.

In any case, in this section we cover a few select cases on gluing functions together. In particular, we investigate and use the behaviour of intersecting these functions with a plane to create expressions for arbitrary shapes, and investigate shapes.

\subsection{Introduction to curves generated by gluing functions}
Suppose we have two functions, $f(x,y)$ and $g(x,y)$, and we want to glue them along the curve $f(x,y)=g(x,y)$. We could do this in a few ways, two of which are:
$$
    s(x,y)=\begin{piecewise}
        f(x,y) & f(x,y)\geq g(x,y) \\
        g(x,y) & f(x,y)\leq g(x,y)
    \end{piecewise}=\max\br{f(x,y),g(x,y)}
$$

or:

$$
    s(x,y)=\begin{piecewise}
        g(x,y) & f(x,y)\geq g(x,y) \\
        f(x,y) & f(x,y)\leq g(x,y)
    \end{piecewise}=\min\br{f(x,y),g(x,y)}
$$

This actually encodes some fairly complex behaviour in our functions (for example solving for $f(x,y)=g(x,y)$ is not easy); perhaps this is not what we want. Perhaps this is a backwards way of defining what we want, but for the sake of argument, let us now suppose that we have $f(x,y)=y-F(x)$ and $g(x,y)=G(x)-y$, and suppose $s(x,y)=0$. That is, from our first formulation:

\begin{align*}
    s(x,y) &= \begin{piecewise}
        y-F(x) & y-F(x)\geq G(x)-y \\
        G(x)-y & y-F(x)\leq G(x)-y
    \end{piecewise} = 0
\end{align*}

Suddenly, expressing this formulation seems a lot harder, even if we know we can express it by $s(x,y)=\max\br{y-f(x),G(x)-y}=0$. But what does it actually mean?

Let us begin from scratch. We've derived a way to glue two functions in two arguments in a higher dimension; this is necessarily a continuous surface in $\mathbb{R}^3$. We then took an intersection for which $s(x,y)=0$, which doesn't necessarily produce a continuous curve in $\mathbb{R}^2$. It stands to reason, therefore, that we might use this to connect two graphs in $\mathbb{R}^2$ which can be expressed with $y=\dots$.

Let us take the graphs of two functions $f(x)$ and $g(x)$; $y=f(x)$ and $y=g(x)$, and their subsequent `arithmetic mean'; $y=\frac{f(x)+g(x)}{2}$. We wish to plot $f(x)$ if $y$ is `above' this curve and $g(x)$ otherwise. That is:
$$
    y = \begin{piecewise}
        f(x) & y\geq \frac{f(x)+g(x)}{2} \\
        g(x) & y\leq \frac{f(x)+g(x)}{2}
    \end{piecewise}
$$

This piecewise function is not well-defined, since it involves recursion on $y$ (i.e. substitutions on $y$ won't work). Instead, we attempt to manipulate it such that we have a single expression. This is done by first substracting the piecewise object from both sides and moving $y$ in, then multiplying the latter piece by $-1$ since both pieces vanish:

$$
    \begin{piecewise}
        y-f(x) & y\geq \frac{f(x)+g(x)}{2} \\
        g(x)-y & y\leq \frac{f(x)+g(x)}{2}
    \end{piecewise} = 0
$$

Using our gluing formula, we have:
$$
    \paren*{\max\br*{y,\frac{f(x)+g(x)}{2}}-f(x)}+\paren*{g(x)-\min\br*{y,\frac{f(x)+g(x)}{2}}}-\paren*{\frac{g(x)-f(x)}{2}}=0
$$

Simplifying gives us:
$$
    \max\br*{y,\frac{f(x)+g(x)}{2}}-\min\br*{y,\frac{f(x)+g(x)}{2}}=\frac{f(x)-g(x)}{2}
$$

Which, using the identity $\max\br{a,b}-\min\br{a,b}=\abs{a-b}$, gives:
$$
\abs{y-\frac{f(x)+g(x)}{2}}=\frac{f(x)-g(x)}{2}
$$

What should be noted is that this gives the beginnings of creating closed shopes. For example, take $f(x)=1-x^2$ and $g(x)=x^2-1$, which gives $\abs{y}=1-x^2$. We only plot both $y=1-x^2$ and $y=x^2-1$ when $1-x^2\geq 0$ and $x^2-1\leq 0$; creating a closed shape curve (namely $\br{(x,y)\in\mathbb{R}^2\mid \abs{y}=1-x^2}$).

\subsection{Curves generated by intersections of boundary curves}
\subsubsection{Logical `or' and `and' properties generating curves}
\label{section:curves_logical_or}
Recall that we can `combine' equality conditions using \ref{theorem:logical_and_equality} and \ref{theorem:logical_or_equality}. Furthermore, recall that $x\in\brak{a,b}\iff \ell_{a}^{b}(x)=x$. Using these two tools, we can create curves using a mix of interpolation and clever modelling.

Suppose that we have a function $F:\mathbb{R}^2\to\mathbb{R}$ such that we have a curve given by $F(x,y)=0$. Let us also define $f_1,f_2,\dots,f_n:\mathbb{R}^2\to\mathbb{R}$ such that $f_1,f_2,\dots,f_n$ define the boundary of the curve we want to create. Namely let us also define $g_1,g_2,\dots,g_n$ such that $g_k=0$ when $f_k$ `contributes' to the boundary.

We construct $F$ as follows:
$$
    F(x,y) = \begin{piecewise}
        0 & f_1(x,y)=0 & g_1(x,y)=0 \\
        0 & f_2(x,y)=0 & g_2(x,y)=0 \\
        \vdots & \vdots & \vdots \\
        0 & f_n(x,y)=0 & g_n(x,y)=0 \\
        \star & \star & \star
    \end{piecewise} = r(x,y)\prod_{k=1}^{n}\paren*{p_{k,1}(f_k(x,y))+p_{k,2}(g_k(x,y))}
$$

For some arbitrary, non-zero, function $r(x,y)$, as well as $p$ functions $p_{k,1}, p_{k,2}$.

Since $F(x,y)=0$ forms our desired curve, we have:
$$
    r(x,y)\prod_{k=1}^{n}\paren*{p_{k,1}(f_k(x,y))+p_{k,2}(g_k(x,y))}=0
$$

Creating the expressions for $g_{k}$ is fairly straightforward for inequalities. As an alternative for $\ell_{a}^{b}(x)=x$, we can also use $\max\br*{\abs{x-\frac{a+b}{2}}+\frac{a-b}{2},0}=0$; this is a direct result of $-m\leq x\leq m\iff \abs{x}\leq m$ and $x\leq 0\iff \max\br{x,0}=0$.

\begin{example}
    We want to find a curve such that for all $(x,y)\in\mathbb{R}^2$, we have $y=x$ for $x\geq 0$ and $y=-x$ for $x\leq 0$.

    Creating a function to generate the curve, we have:
    $$
        F(x,y) = \begin{piecewise}
            0 & y-x & x\geq 0 \\
            0 & y+x & x\leq 0 \\
            \star & \star & \star
        \end{piecewise}
    $$

    Recall $x\geq 0\iff\abs{x}=x$ and $x\leq 0\iff\abs{x}=-x$. Using $\abs{x}$ as our $p$ functions therefore, we get:
    $$
        F(x,y) = \begin{piecewise}
            0 & \abs{y-x}+\abs{\abs{x}-x}=0 \\
            0 & \abs{y+x}+\abs{\abs{x}+x}=0 \\
            \star & \star
        \end{piecewise} = (\abs{y-x}+\abs{\abs{x}-x})(\abs{y+x}+\abs{\abs{x}+x})
    $$

    So our final curve is:
    $$
        \br*{(x,y)\in\mathbb{R}^2\mid (\abs{y-x}+\abs{\abs{x}-x})(\abs{y+x}+\abs{\abs{x}+x})=0}
    $$
\end{example}

This method has a pitfall in that it is unable to be graphed on most graphing calculators, as they make use of certain optimisations which interfere with the graphing of them. A good, simple example of this is the curve $\br*{(x,y)\in\mathbb{R}^2\mid \abs{y^2-x^2}=0}$. This curve is equivalent to $\br*{(x,y)\in\mathbb{R}^2\mid (y=x)\lor (y=-x)}$, but fails to be graphed sufficiently in tools like Mathematica, Desmos, and GeoGebra.

These graphs can be approximated, however; regard that our function describing the curve, $s(x,y)$, generates our curve exactly for $s(x,y)=0$; it stands to reason that in a neighbourhood of $0$ we should have something `similar' to our curves (since $s(x,y)$ is continuous). That is, for some small $\varepsilon>0$ we have that $s(x,y)=\varepsilon$ approximates our curve.

\subsubsection{Max of boundary functions generating curves}
In the previous method of creating curves, we explicitly specified the boundary intersection points in our piecewise functions, which allowed us to create curves that are, for all intents and purposes, human readable, at the cost of being lengthy. Using the $\max$ function for boundary functions, we describe our boundary conditions in terms of other boundaries. The idea behind this is so that we can succinctly describe the boundary in terms of a single $\max$ expression.

\begin{example}
    For the boundary $y=0$ and conditions $0\leq x\leq 1$, we can define the boundaries $x=0$ and $x=1$. That is,
    $$
        F(x,y)=\begin{piecewise}
            0 & y=0 & x\geq 0 & x\leq 1
        \end{piecewise}
    $$

    In order for our definition to match the $\max$ function, we should have $x\geq 0\iff -x\leq 0$ and $x\leq 1\iff x-1\leq 0$. Then using the substitution $y=0$, we have:
    $$
        F(x,y)=\begin{piecewise}
            y & y=0 & -x\leq y & x-1\leq y
        \end{piecewise}
    $$

    Similarly, we could also write:
    $$
        F(x,y)=\begin{piecewise}
            -y & -y=0 & -x\leq -y & x-1\leq -y
        \end{piecewise}
    $$

    These generate two similar curves for $F(x,y)=0$ but are not identical (it depends on other boundary conditions). In any case, we can eliminate the $y=0$ or $-y=0$ condition if and only if the entire function is $0$. This gives us either:
    $$
        F(x,y)=\max\br*{-x,x-1,y}=0
    $$
    or
    $$
        F(x,y)=\max\br*{-x,x-1,-y}=0
    $$
\end{example}

Using the above example as motivation for a general case, let us define the boundary functions $f_1,f_2,\dots,f_n:\mathbb{R}^2\to\mathbb{R}$ so that we construct the function:
$$
    F(x,y) = \begin{piecewise}
        0 & f_1(x,y) = 0 & f_2(x,y)\leq 0 & f_2(x,y)\leq 0 & \dots & f_n(x,y) \leq 0 \\
        0 & f_2(x,y) = 0 & f_1(x,y)\leq 0 & f_3(x,y)\leq 0 & \dots & f_n(x,y) \leq 0 \\
        \vdots & \vdots & \vdots & \vdots & \ddots & \vdots \\
        0 & f_n(x,y) = 0 & f_1(x,y)\leq 0 & f_2(x,y)\leq 0 & \dots & f_{n-1}(x,y) \leq 0 \\
    \end{piecewise}
$$

For all $k\in\br{1,2,\dots,n}$, $f_k(x,y)=0$, we can use the substitution $f_k(x,y)=0$ in the $k$ piece such that we have:
$$
    F(x,y) = \begin{piecewise}
        f_1(x,y) & f_1(x,y) = 0 & f_2(x,y)\leq f_1(x,y) & f_2(x,y)\leq f_1(x,y) & \dots & f_n(x,y) \leq f_1(x,y) \\
        f_2(x,y) & f_2(x,y) = 0 & f_1(x,y)\leq f_2(x,y) & f_3(x,y)\leq f_2(x,y) & \dots & f_n(x,y) \leq f_2(x,y) \\
        \vdots & \vdots & \vdots & \vdots & \ddots & \vdots \\
        f_n(x,y) & f_n(x,y) = 0 & f_1(x,y)\leq f_n(x,y) & f_2(x,y)\leq f_n(x,y) & \dots & f_{n-1}(x,y) \leq f_n(x,y) \\
    \end{piecewise}
$$

Again, we can now eliminiate the $f_k(x,y)=0$ case if and only if the entire function is zero. Using the definition of the $\max$ function then, we get:
$$
    F(x,y)=\max\br*{f_1(x,y),f_2(x,y),\dots,f_n(x,y)}=0
$$

\begin{example}
    We wish to find the boundary functions of a triangle with vertices $(-1,-1)$, $(1,-1)$, $(0,1)$.

    From these vertices, we get three linear lines for $(x,y)\in\mathbb{R}^2$: $y=-1$, $1-2x$ and $y=2x+1$.

    Regard now that we wish to have the following:
    \begin{itemize}
        \item $y\geq -1\implies -y-1\leq 0$,
        \item $y\leq 1-2x\implies y+2x-1\leq 0$,
        \item $y\leq 2x+1\implies y-2x-1\leq 0$
    \end{itemize}

    Therefore, it stands to reason that our boundary functions are:
    \begin{itemize}
        \item $f_1(x,y)=-y-1$,
        \item $f_2(x,y)=y+2x-1$,
        \item $f_3(x,y)=y-2x-1$
    \end{itemize}
\end{example}

% proof that the set of convex polygons can be given by these?
% convex polygons <-> max

\begin{theorem}
    \label{theorem:convex_polygons}
    The set of convex polygons and the set of regions which can be represented by
    $$
        \br*{(x,y)\in\mathbb{R}^2\mid \max\br*{f_1,f_2,\dots,f_n}=0}
    $$
    where $f_1,f_2,\dots,f_n$ are bivariate affine functions (namely, of the form $ax+by+c$ for $a,b,c\in\mathbb{R}$) are equal.

    \begin{proof}
        Let us begin by working with a closed region (which will be covered later), $S$, such that:
        $$
            S=S_1\cap S_2\cap \dots\cap S_n
        $$

        where $S_k$, for $k\in\br{1,2,\dots,n}$, is defined to be:
        $$
            S_k=\br*{(x,y)\in\mathbb{R}^2\mid f_k(x,y)\leq 0}
        $$

        for bivariate affine functions $f_k(x,y)$. We define $\partial S$ to be the boundary of $S$.

        By the construction covered in this section, we can now define $\partial S$:
        \begin{align*}
            \partial S = \br*{(x,y)\in\mathbb{R}^2\mid \partial S(x,y)=0} & & \partial S(x,y)=\max\br*{f_1(x,y),f_2(x,y),\dots,f_n(x,y)} \\
            S = \br*{(x,y)\in\mathbb{R}^2\mid S(x,y)=0} & & S(x,y)=\max\br{\partial S(x,y),0}
        \end{align*}

        The latter definition will be covered in the next section. It now stands to reason that if $S$ is a closed convex set, then $\partial S$ is a convex polygon by definition.

        $S$ is, in fact, necessarily convex as $S_1,S_2,\dots,S_n$ are convex and the intersection of convex sets is itself convex.

        It now only stands to show that all polygons with convex sets can be represented using the latter definition above: indeed, they can be, since they can always be represented as a set of half-plane intersections generated from the vertices of the polygon.
    \end{proof}
\end{theorem}

\subsubsection{Piecing convex shapes together}
Now that we've shown that we can produce convex sets, we now need a means by which we can construct concave sets (without relying on the logical `or' and `and' method). The way we do this is by deconstructing our desired concave region into a set of convex regions, and then finding an equation which intersects each piece and distictly separates them.

For example, let us take two functions $A(x,y)$ and $B(x,y)$ defining the curve $S$ such that either $A(x,y)=0$ or $B(x,y)=0$ when $(x,y)\in S$. Then there must exist some intersection (for example $f(x)$ such that when $y=f(x)$, or $x=f(y)$, $A(x,f(x))=B(x,f(x))$ iff $(x,f(x))\in S$), in order for our concave shape to be formulated this way. Then there are several possibilities, including the following:
\begin{align*}
    F(x,y) &= \begin{piecewise}
        A(x,y) & y\geq f(x) \\
        B(x,y) & y\leq f(x)
    \end{piecewise} \\
    G(x,y) &= \begin{piecewise}
        B(x,y) & y\geq f(x) \\
        A(x,y) & y\leq f(x)
    \end{piecewise} \\
    H(x,y) &= \begin{piecewise}
        A(x,y) & x\geq f(y) \\
        B(x,y) & x\leq f(y)
    \end{piecewise} \\
    S(x,y) &= \begin{piecewise}
        B(x,y) & x\geq f(y) \\
        A(x,y) & x\leq f(y)
    \end{piecewise} \\
\end{align*}

There can, of course, be more complex intersections, but we're again restricted to our previous techniques dealing with strictly continuous functions in $\mathbb{R}^2$ (for example, $f(x)\geq g(y)$ might only be able to be simplified if each piece contains a $f(x)$ or $g(y)$).

\begin{example}
    Let us formulate the expression for the boundary of region given by the following curves:
    \begin{align*}
        S_1 &= \br*{(x,y)\in\mathbb{R}^2\mid y=-x\land 0\leq x\leq 1} \\
        S_2 &= \br*{(x,y)\in\mathbb{R}^2\mid y=x\land -1\leq x\leq 0} \\
        S_3 &= \br*{(x,y)\in\mathbb{R}^2\mid y=1-2x\land 0\leq x\leq 1} \\
        S_4 &= \br*{(x,y)\in\mathbb{R}^2\mid y=1+2x\land -1\leq x\leq 0}
    \end{align*}

    The first step is to group each curve such that when closed, each group would form the boundary of a convex polygon which falls entirely within the final concave polygon.

    For example, the boundary $S_{1,2}=S_1\cup S_2\cup \br*{(x,y)\in\mathbb{R}^2\mid y=-1}$ doesn't work as $y=-1$ falls outside the boundary and so does the resultant region, and any other choice of closure available under this combination would result in this group being concave itself.

    Instead, let us create $U_1=\br*{(x,y)\in\mathbb{R}^2\mid (x,y)\in S_1\cup S_3}$ and $U_2=\br*{(x,y)\in\mathbb{R}^2\mid (x,y)\in S_2\cup S_4}$. This falls out quite naturally (using our convex methods), giving us:
    \begin{align*}
        U_1 &= \br*{(x,y)\in\mathbb{R}^2\mid \max\br{y+2x-1,-y-x}=0\land 0\leq x\leq 1} \\
        U_2 &= \br*{(x,y)\in\mathbb{R}^2\mid \max\br{y-2x-1,-y+x}=0\land -1\leq x\leq 0}
    \end{align*}

    Regard that the conditions $x\geq -1$ and $x\leq 1$ are redundant now, and we can now produce the equation for our shape:
    $$
        U(x,y) = \begin{piecewise}
            \max\br{y+2x-1,-y-x} & x\geq 0 \\
            \max\br{y-2x-1,-y+x} & x\leq 0 \\
        \end{piecewise}
    $$

    Confirming that $U(x,y)$ is in fact continuous, we get that $U(x,y)=\max\br{y+2\abs{x}-1,-y-\abs{x}}$.

    Hence, the boundary of our region is given by:
    $$
        U = \br*{(x,y)\in\mathbb{R}^2\mid U(x,y)=0}
    $$
\end{example}

\subsection{Regions generated by intersections of boundary curves}
\subsubsection{Logical `or' and `and' properties generating regions}
Regard that a region generated using the logical `or' and `and' properties of piecewise functions is a special case of the same process, for curves, per Section \ref{section:curves_logical_or}. Recall that we can express certain regions already as equalities. For example, for a half-plane split such as $x\geq a$ we have that $-x\leq -a\iff\max\br{-x,-a}=-a\iff\max\br{a-x,0}=0$, and so forth. So, in this regard, such regions are far easier to represent than their respective boundaries.

\begin{example}
    The square, bounded by equations $x=-1$, $x=1$, $y=-1$, $y=1$, is far easier to express as a region (using the techniques as given above) than it is a curve:
    $$
        \max\br{-1-x,0}+\max\br{x-1,0}+\max\br{-y-1,0}+\max\br{y-1,0}=0
    $$

    This expression also happens to simplify down nicely to $\abs{x}+\abs{\abs{x}-1}+\abs{y}+\abs{\abs{y}-1}=2$.
\end{example}

Such a region could be characterised by a function $F:\mathbb{R}^2\to\mathbb{R}$ (such that our region is defined for $F(x,y)=0$):
$$
    F(x,y)=\begin{piecewise}
        0 & F_1(x,y)=0 & F_2(x,y)=0 & \dots & F_n(x,y)=0
    \end{piecewise}
$$

With only one piece contributing to the region we now have only one major simplification to make, as opposed to our curve previously.

\subsubsection{Max of boundary functions generating regions}
\label{section:max_boundary_region}
Let us now build on our technique for generating curves and regions via the max function. Recall in \ref{theorem:convex_polygons} we showed that a set of affine functions `combined' using this method could only produce convex polygons. A similar property is true for any functions of the form $y-f(x)=0$, wherein we can only produce boundaries to convex sets.

Suppose that we have some function $S:\mathbb{R}^2\to\mathbb{R}$ such that $S(x,y)=0\iff (x,y)\in S$ where $S$ is some set. Suppose we then characterise such a function via the following:
$$
    S(x,y)=\begin{piecewise}
        0 & S_1(x,y)\leq 0 & S_2(x,y)\leq 0 & \dots & S_n(x,y)\leq 0
    \end{piecewise}
$$

Then $S(x,y)=\max\br{S_1(x,y),\dots,S_n(x,y),0}$ by definition.

The boundary of $S$, $\partial S$, can be given by $(x,y)\in\partial S\iff \partial S(x,y)=\max\br{S_1(x,y),\dots,S_n(x,y)}=0$; consequently, $S(x,y)=\max\br{\partial S(x,y),0}=0$. Furthermore, it's not too difficult to see that this is the case (though such a proof won't be filled in here).

More formally, we can define our sets as:
\begin{align*}
    S &= \br*{(x,y)\in\mathbb{R}^2\mid \max\br{S_1(x,y),\dots,S_n(x,y),0}=0} \\
    \partial S &= \br*{(x,y)\in\mathbb{R}^2\mid \max\br{S_1(x,y),\dots,S_n(x,y)}=0} \\
\end{align*}

\newpage